<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
   <!-- Unnamed (菜单) -->
      <div id="u5" class="ax_default">
           <img id="u103_img" class="img " src="static/images/index/u103.png"/>
        <img id="u5_menu" class="img " src="static/images/index/u5_menu.png" alt="u5_menu"/>

       <div id="u13" class="ax_default box_1">

        <div id="u13_div" class=""></div>
             <div id="u17" class="ax_default box_2" data-label="用户名">
        <div id="u17_div" class=""></div>
                 <div id="u19" class="ax_default box_2" data-label="个人中心">
        <div id="u19_div" class=""></div>
                     <div id="u21" class="ax_default box_2" data-label="数据统计">
        <div id="u21_div" class=""></div>
                         <div id="u103" class="ax_default image">

        <!-- Unnamed () -->

        </div>
    <div>
        <audio controls autoplay></audio>
        <input onclick="startRecording()" type="button" value="录音" />
        <input onclick="stopRecording()" type="button" value="停止" />
        <input onclick="playRecording()" type="button" value="播放" />
{#        <input onclick="uploadAudio()" type="button" value="提交" />#}
        <input onclick="cancelAudio()" type="button" value="取消" />
    </div>

    <script type="text/javascript" src="static/files/index/record.js"></script>


    <script>

        var recorder;

        var audio = document.querySelector('audio');

        function startRecording() {
            HZRecorder.get(function (rec) {
                recorder = rec;
                recorder.start();
            });
        }

        function stopRecording() {
            recorder.stop();
        }

        function playRecording() {
            recorder.play(audio);
        }

        function cancelAudio(){
            recorder.stop();
            recorder.clear();
        }

        function uploadAudio() {
            recorder.upload("/static/uploads/temp/video/", function (state, e) {
                switch (state) {
                    case 'uploading':
                        var percentComplete = Math.round(e.loaded * 100 / e.total) + '%';
                        break;
                    case 'ok':
                        alert(e.target.responseText);
                        {#alert("上传成功");#}
                        break;
                    case 'error':
                        alert("上传失败");
                        break;
                    case 'cancel':
                        alert("上传被取消");
                        break;
                }
            });
        }

    </script>

</body>
</html>